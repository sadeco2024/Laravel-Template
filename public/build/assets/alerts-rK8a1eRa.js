document.querySelectorAll("input.daterange").forEach(t=>{try{flatpickr(t,{mode:"range",dateFormat:"d-m-Y",locale:"es"})}catch{throw"Error al cargar el Datepicker"}});document.querySelectorAll(".confirm-delete").forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();let o=t.closest("form");try{Swal.fire({title:t.dataset.title||"¿Esta usted seguro?",text:t.dataset.text||"Esta acción no se puede deshacer",icon:t.dataset.icon||"warning",showCancelButton:!0,cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:t.dataset.btntext||"Eliminar"}).then(a=>{a.isConfirmed&&(Swal.fire("Eliminado!","El registro ha sido eliminad.","success"),o.submit())})}catch{throw new Error("Error: Falta librería SweetAlerts2")}})});document.querySelectorAll(".rhExtras").forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();let o=t.closest("div.input-group");o=o.querySelector("select");const a=document.querySelector('meta[name="csrf-token"]').getAttribute("content");Swal.fire({title:"¿Nombre del "+t.dataset.concepto+"?",input:"text",inputAttributes:{autocapitalize:"on"},showCancelButton:!0,confirmButtonText:"Guardar",showLoaderOnConfirm:!0,preConfirm:r=>fetch("/generales/setRhExtras",{method:"post",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":a},body:JSON.stringify({concepto:t.dataset.concepto,descripcion:r})}).then(e=>e.ok?e.json():e.json().then(c=>{throw console.log(c.message),new Error(c.message)})).catch(e=>{Swal.showValidationMessage(`${e}`)}),allowOutsideClick:()=>!Swal.isLoading()}).then(r=>{if(r.isConfirmed){Swal.fire({position:"center",icon:"success",title:"El concepto ha sido agregado.",showConfirmButton:!1,timer:1500});let e=document.createElement("option");e.text=r.value.descripcion,e.value=r.value.id,o.add(e),o.value=r.value.id}})})});
